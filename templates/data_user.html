{% extends 'base.html' %}
{% block content %}
{% if current_user.role == 'admin' %}
<h2>Manajemen Data User</h2>

<div class="users-grid">
    {% if users %}
        {% for user in users %}
        <div class="user-card">
            <div class="user-info">
                <h3>{{ user.username }}</h3>
                <p><strong>ID:</strong> {{ user.id }}</p>
                <p><strong>Role:</strong> 
                    <span class="role-badge {{ user.role }}">{{ user.role | capitalize }}</span>
                </p>
            </div>
            <div class="user-actions">
                <a href="{{ url_for('update_user', user_id=user.id) }}" class="btn btn-update">Edit</a>
                {% if user.username != 'admin' %} <!-- Lindungi admin dari delete -->
                <a href="{{ url_for('delete_user', user_id=user.id) }}" class="btn btn-delete" 
                   onclick="return confirm('Yakin menghapus user {{ user.username }}?')">Hapus</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p class="no-data">Belum ada user terdaftar.</p>
    {% endif %}
</div>

<div class="add-user-btn">
    <a href="{{ url_for('tambah_user') }}" class="btn btn-add">+ Tambah User Baru</a>
</div>

<style>
    .users-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin: 30px 0; }
    .user-card { background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column; }
    .user-info { padding: 20px; background: #f8f9fa; flex-grow: 1; }
    .user-info h3 { margin: 0 0 10px; color: #6a0dad; }
    .role-badge { padding: 4px 10px; border-radius: 20px; font-size: 0.8em; font-weight: bold; }
    .role-badge.admin { background: #dc3545; color: white; }
    .role-badge.user { background: #28a745; color: white; }

    .user-actions { padding: 15px; background: white; border-top: 1px solid #eee; display: flex; gap: 10px; }
    .btn { padding: 10px 16px; text-decoration: none; border-radius: 8px; font-weight: bold; text-align: center; flex: 1; }
    .btn-update { background: #6a0dad; color: white; }
    .btn-delete { background: #6a0dad; color: white; }
    .btn-add { background: #28a745; color: white; display: inline-block; padding: 14px 24px; font-size: 1.1em; }

    .add-user-btn { text-align: center; margin: 30px 0; }
    .no-data { text-align: center; color: #666; font-size: 1.1em; padding: 40px; }
</style>
{% else %}
<p class="no-data">Akses ditolak. Halaman ini hanya untuk Admin.</p>
{% endif %}
{% endblock %}